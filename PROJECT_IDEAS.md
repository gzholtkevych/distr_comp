# Concepts

A distributed computation is a complex consisting

- of at least two isolated local processes interacting with one another by exchanging only messages and
- of a communication subsystem providing this interaction.

## Local processes

We assume that

>each local process of a distributed computation is performed sequentially, identified by a natural number from the diapason $1\ldots n$ where $n>2$ is the fixed number of the distributed computation local processes.
To refer to the set of these local processes we use the notation $\mathbb P_n$.

## Local processes interaction

Regarding local process interaction, we assume

>1. each local process is associated with some non-empty subset of other local processes called its neighbors.
The process can send a message directly to neighbors only.
The subset of neighbors of $p\in\mathbb P_n$ does not equal $\mathbb P_n$ as a rule and it is referred to as $\mathop{\mathrm{neighbor}}(p)$.
>2. Regarding to $\\{\mathop{\mathrm{neighbor}}(p)\subset\mathbb P_n\mid p\in\mathbb P_n\\}$ ia assumed the following
>    - any process can send no message to itself;
>    - a piece of information can be delivered from any local process to any other local process with a sequence of direct message exchanges.  

## Constraints for $\mathop{\mathrm{neighbor}}$

Let us associate with a function $f:\mathbb P_n\to2^{\mathbb P_n}$ the following operator $F:2^{\mathbb P_n}\to2^{\mathbb P_n}$

$$F(A)=A\cup\\{q\in\mathbb P_n\mid q\in f(p)\text{ for some $p\in A$}\\}.$$

This operator is evidently monotonic and due to Knasterâ€“Tarski theorem, for any $A\subset\mathbb P_n$, it has the least fixed point $T$ such that $A\subset T$.

Now, we can rigorously formulate constraints for admissible functions $\mathop{\mathrm{neighbor}}$:

>1. $p\notin\mathop{\mathrm{neighbor}}(p)$ for any $p\in\mathbb P_n$;
>2. for any $p\in\mathbb P_n$, the least fixed point $T_p$ of the operator associated with $\mathop{\mathrm{neighbor}}$ such that $\\{p\\}\subset T_p$ equals $\mathbb P_n$.

### How to build $\mathop{\mathrm{delivery}}$

One can use the following method to build the function $\mathop{\mathrm{delivery}}$ that corresponds to function $\mathop{\mathrm{neighbors}}$.

**Require:** the function $f:\mathbb P_n\to2^{\mathbb P_n}$ and $p\in\mathbb P_n$.<br/>
**Ensure:** the set $f^+(p)\in2^{\mathbb P_n}$.

>1. $R\gets\\\{p\\}$
>2. $N\gets R\cup\\{q\in\mathbb P_n\setminus R\mid q\in f(p')\text{ for some }p'\in R\\}$
>3. if $N\neq R$ then $R\gets N$ and jump to 2
>4. the result is $R$

<details><summary><i>Why is this building method correct?</i></summary>

**Proposition.**
The described above method has no infinite loop.<br/>
*Proof.*<br/>
There is only one potentially infinite loop of the method, namely 2 - 3.
If $R_0,R_1,\ldots$ is the sequence of values of variable $R$ generated by computation progress then $R_k\subset R_{k+1}$ for all natural $k$.
Taking into account that all $R_k\subset\mathbb P_n$, which is finite, then for some $k$, $R_k=R_{k+1}$.
It means that $N=R$ at this step and, therefore, the loop terminates.
<br/>$\Box$

**Proposition.**
For a function $f:\mathbb P_n\to2^{\mathbb P_n}$, the function $f^+:\mathbb P_n\to2^{\mathbb P_n}$ obtained by using the described above method, satisfies the condition
$$\forall\ p,q,r\in\mathbb P_n,\ q\in f^+(p)\Rightarrow r\in f^+(q)\Rightarrow r\in f^+(p).$$

</details>

### Realization

Local processes of a distributed algorithm are identified with positive natural numbers lying in the range from 1 to $n$ (the number of the local processes).

A list of lists of positive integers models the function $\mathop{\mathrm{neighbors}}$. In such a list, the list located at the $k$-th place identifies neighbors of the process with the logical identifier equals $k+1$.
Thus, each inner list contains numbers from the diapason from 1 to $n$.

**Example.**
This communication graph

```mermaid
graph LR
  1 --- 4;
  2 --- 3;
  3 --- 4;
  4 --- 5;
  1 --- 2;
  1 --- 3;
```
is represented by the YAML-file with the next content

```
neighborhood:
  - [2, 3, 4]
  - [1, 3]
  - [1, 2, 4]
  - [1, 3, 5]
  - [4]
```
