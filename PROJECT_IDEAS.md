# Concepts

A distributed algorithm is a complex of $n>1$ isolated local processes, whose set is denoted by $\mathbb P_n$, and a communication subsystem that provides the interaction of the processes by message exchanging only.

Each process can send a message to some non-empty subset of other processes and this subset does not equal $\mathbb P_n$ in general.
So, a function $\mathop{\mathrm{neighbors}}:\mathbb P_n\to2^{\mathbb P_n}$ that associates such a subset with each process is needed.

The function $\mathop{\mathrm{neighbors}}$ should satisfy the following natural constraints.

1. $p\notin\mathop{\mathrm{neighbors}}(p)$ for any $p\in\mathbb P_n$;
2. $q\in\mathop{\mathrm{delivery}}(p)$ for any $p,q\in\mathbb P_n$.

Here, $\mathop{\mathrm{delivery}}:\mathbb P\to2^{\mathbb P_n}$ is the least function that satisfies the following conditions

* $q\in\mathop{\mathrm{neighbors}}(p)\Rightarrow q\in\mathop{\mathrm{delivery}}(p)$ for any $p,q\in\mathbb P_n$;
* $p'\in\mathop{\mathrm{neighbors}}(p)\land q\in\mathop{\mathrm{delivery}}(p')\Rightarrow q\in\mathop{\mathrm{delivery}}(p)$ for any $p,p',q\in\mathbb P_n$.

Constraint (1) forbids sending a message to itself, and constraint (2) guarantees the possibility of delivering a message between any two local processes.

## How to build $\mathop{\mathrm{delivery}}$

One can use the following method to build the function $\mathop{\mathrm{delivery}}$ that corresponds to function $\mathop{\mathrm{neighbors}}$.

**Require:** the function $f:\mathbb P_n\to2^{\mathbb P_n}$ and $p\in\mathbb P_n$.<br/>
**Ensure:** the set $f^+(p)\in2^{\mathbb P_n}$.

>1. $R\gets\\\{p\\}$
>2. $N\gets R\cup\\{q\in\mathbb P_n\setminus R\mid q\in f(p')\text{ for some }p'\in R\\}$
>3. if $N\neq R$ then $R\gets N$ and jump to 2
>4. the result is $R$

**Proposition.**
The described above method has no infinite loop.<br/>
*Proof.*<br/>
There is only one potentially infinite loop of the method, namely 2 - 3.
If $R_0,R_1,\ldots$ is the sequence of values of variable $R$ generated by computation progress then $R_k\subset R_{k+1}$ for all natural $k$.
Taking into account that all $R_k\subset\mathbb P_n$, which is finite, then for some $k$, $R_k=R_{k+1}$.
It means that $N=R$ at this step and, therefore, the loop terminates.
<br/>$\Box$

**Proposition.**
For a function $f:\mathbb P_n\to2^{\mathbb P_n}$, the function $f^+:\mathbb P_n\to2^{\mathbb P_n}$ obtained by using the described above method, satisfies the condition
$$\forall\ p,q,r\in\mathbb P_n,\ q\in f^+(p)\Rightarrow r\in f^+(q)\Rightarrow r\in f^+(p).$$

# Realization

Local processes of a distributed algorithm are identified with positive natural numbers lying in the diapason from 1 to $n$ (the number of the local processes).

A list of lists of positive integers models the function $\mathop{\mathrm{neighbors}}$. In such a list, the list located at the $k$-th place identifies neighbors of the process with the logical identifier equals $k+1$.
Thus, each inner list contains numbers from the diapason from 1 to $n$.
